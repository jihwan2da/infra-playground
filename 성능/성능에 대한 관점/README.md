## 성능에 대한 관점  
**부하**란 처리를 실행하려고 해도 실행할 수 없어서 대기하고 있는 프로세스의 수를 의미한다.  
[참고링크](https://brainbackdoor.tistory.com/117)  
- 성능의 개선 및 저하는 수익에 직접적인 영향을 준다. 이에 우리는 화면 응답시간이 느리다고 판단되면, 어느 부분에서 지연현상이 발생하는지 파악해야 한다.  
- 우리는 서비스가 얼마나 빠른지(Time), 일정 시간 동안 얼마나 많이 처리할 수 있는지(TPS), 그리고 얼마나 많은 사람들이 동시에 사용할 수 있는지(Users)에 대해 이야기한다.  
- 성능 개선에는 한계가 생길 수밖에 없기에(암달의 법칙), 부하의 원인을 파악하여 이를 제거해야 한다. 이때, 성능을 바라보는 관점은 각자 처한 상황에 따라 달라지게 된다.  

### 1. 사용자
얼마나 많은 사람들이 **동시에** 사용할 수 있는가는 서비스를 운영하며 늘 화두이다. 사용자란, 관점에 따라 다양한 형태로 존재한다.  
- 시스템 관리자의 관점에서는 등록된 사용자와 등록되지 않은 사용자만이 존재한다.
- 서버의 관점에선 로그인한 사용자와 로그인하지 않은 사용자만이 존재한다.
- 성능 테스터의 관점에선 사용자가 Concurrent User 인지 Active User 인지가 중요하다. 여기서 **Concurrent User**란, 웹 페이지를 띄어놓은 사용자처럼, 언제든지 부하를 줄 수 있는 사용자를 의미한다. 반면, **Active User**는 메뉴나 링크를 누르고 결과가 나오기를 기다리는 등 실제로 서버에 부하를 주고 있는 사용자를 의미한다.
- Active User 와 Concurrent User 의 비율은 서비스의 성격에 따라 다르므로 이 점을 감안하고 성능테스트를 계획해야 한다. (성능 테스트시에 VUser는 Active User와 유사하다.) 가령 수강신청의 경우, 특정 시간대엔 그 비율이 90%에 육박할 수 있어, 전체 평균을 기준으로 테스트할 경우 잘못된 판단을 이끌어낼 수 있다.  
  
### 2. 처리량
처리량(TPS)를 계산하는 공식은 아래와 같습니다.
- 서비스 처리 건수 / 측정 시간
- 요청 사용자 수 / 평균 응답시간
- 동시 사용자 수 / 서비스 요청 간격  
  
**TPS(처리량), Time(응답 시간), User(사용자 수)**
- User 증가 시 TPS는 어느 정도 증가하다가 더 이상 증가하지 않게 되며, Time은 일정하게 유지되다 점차적으로 증가한다. 반면, 부하가 증가할 경우(TPS가 증가) 지연시간(Time)은 변곡점에 이르기도 하는데, 이 경우 시스템 리소스가 누수되고 있는 것은 아닌지 확인해봐야 한다.
- Time과 달리, TPS (Transaction Per Seconds)는 Scale out 혹은 Scale up을 통해 증가시킬 수 있다. 보통 테스트 시에 단순히 응답시간을 기준으로 종료시키지 말고, TPS나 DB Connection, CPU 등을 종합적으로 확인하고 중단시켜야 한다.  
  
**Performance vs Scabaility**  
- 성능(Performance)에 문제가 있는 경우엔, 단일 사용자에 대한 응답 속도가 느려진다.
- 확장성(Scabaility)에 문제가 있는 경우엔, 당장은 단일 사용자에게는 빠르지만 부하가 많아질 경우 속도가 느려질 수 있다.  
  
### 3. 시간
- 사용자에게 있어서 Time은 응답시간만 존재한다. 하지만 실제 시스템 입장에선, 사용자가 요청에 대해서 응답을 받은 후에 웹 페이지를 보는 등의 작업을 하는 시간(Think Time)이 존재한다.  
- 성능 테스트 시엔 실제 지연시간이 발생하는 구간을 파악하여야 한다.
  - 브라우저와 웹 서버간 구간에서는 정적 파일 크기, Connection 관리, 네트워크 환경 등의 영향을 받을 수 있다.
  - Server 구간에서 발생한 경우, DB와 애플리케이션 간 연결의 문제, 프로그램 로직 상의 문제 혹은 서버의 리소스 부족 등을 의심해 볼 수 있다.
  - 네트워크 이슈의 경우 테스트하는 환경에 따라 달라질 수도 있다. 지연 현상은 사용자의 이탈과 매우 밀접하기에 개선되어야 하지만, 단순히 서버를 늘린다고(Scale out) 해결되는 것은 아니다. 이에 출시 전에 테스트를 하여 최대 응답시간을 파악하고 있어야 하며, 상위 5%의 화면이 95% 사용자 요청을 받는다는 점을 감안하고 튜닝의 대상을 선정해가야 한다.
